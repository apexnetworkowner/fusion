<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Game → Data URL Embed Generator</title>
<style>
  body { font-family: Arial, sans-serif; margin:20px; background:#f5f5f5; }
  h2 { color:#4a148c; }
  label { font-weight:bold; margin-top:12px; display:block; }
  textarea, input[type=file] { width:100%; padding:8px; margin-top:6px; border-radius:6px; border:1px solid #ccc; font-family:monospace; }
  button { margin-top:12px; padding:10px 16px; border:none; border-radius:6px; background:#4a148c; color:white; cursor:pointer; }
  button:hover { background:#6a1b9a; }
  #status { margin-top:10px; font-weight:bold; }
</style>
</head>
<body>
<h2>HTML Game → Google Sites Embed Generator</h2>

<label for="fileInput">Choose HTML Game File:</label>
<input id="fileInput" type="file" accept=".html,.htm">

<label for="gameHTML">Or Paste HTML Game Code:</label>
<textarea id="gameHTML" rows="10" placeholder="Paste your game HTML here..."></textarea>

<button id="convert">Convert to Embed</button>
<div id="status"></div>

<h3>Iframe Embed (Google Sites)</h3>
<textarea id="iframeSnippet" rows="6" readonly></textarea>
<button id="copyBtn">Copy</button>

<script>
let currentDataUrl = "";

// Convert text to base64
function toBase64(str){
  return btoa(unescape(encodeURIComponent(str)));
}

// Handle file upload
document.getElementById("fileInput").addEventListener("change", e=>{
  const file = e.target.files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = ev=>{
      document.getElementById("gameHTML").value = ev.target.result;
    };
    reader.readAsText(file);
  }
});

// Convert game → data URL + iframe
document.getElementById("convert").addEventListener("click", ()=>{
  const html = document.getElementById("gameHTML").value.trim();
  const status = document.getElementById("status");
  if(!html){ status.textContent = "⚠️ Please upload or paste a game."; return; }

  status.textContent = "⏳ Converting...";
  try {
    const encoded = toBase64(html);
    currentDataUrl = "data:text/html;base64," + encoded;

    const snippet = `<iframe src="${currentDataUrl}" style="width:100%;height:600px;border:0;"></iframe>`;
    document.getElementById("iframeSnippet").value = snippet;
    status.textContent = "✅ Embed generated!";
  } catch(err){
    console.error(err);
    status.textContent = "❌ Failed to generate.";
  }
});

// Copy button
document.getElementById("copyBtn").addEventListener("click", ()=>{
  const txt = document.getElementById("iframeSnippet").value;
  if(txt){
    navigator.clipboard.writeText(txt).then(()=>alert("Copied!"));
  }
});

// Keyboard shortcut: Shift + C → open in new tab
document.addEventListener("keydown", e=>{
  if(e.shiftKey && e.key.toLowerCase() === "c" && currentDataUrl){
    const w = window.open("about:blank","_blank");
    w.document.write(`<iframe src="${currentDataUrl}" style="border:0;width:100%;height:100%;"></iframe>`);
    w.document.close();
  }
});
</script>
</body>
</html>
